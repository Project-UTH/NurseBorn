<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <div th:replace="~{master/head::head}"></div>
</head>
<body>
<div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
        <div th:replace="~{family/layoutmenufamily::menu}"></div>
        <div class="layout-page">
            <div th:replace="~{master/navbar}"></div>
            <div class="content-wrapper">
                <div class="content-xxl flex-grow-1 container-p-y">
                    <!-- Thông báo nếu chưa đăng nhập -->
                    <div th:unless="${user}">
                        <h2>Bạn chưa đăng nhập</h2>
                        <p>Vui lòng <a th:href="@{/login}">đăng nhập</a> để cập nhật hồ sơ của bạn.</p>
                    </div>

                    <!-- Form cập nhật thông tin người dùng -->
                    <div th:if="${user}">
                        <h2>Cập nhật hồ sơ người dùng</h2>
                        <form th:action="@{/update-user}" th:object="${user}" method="post" enctype="multipart/form-data">
                            <!-- Thông tin chung -->
                            <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Thông tin cá nhân</h5>
                                <div class="mb-3">
                                    <label for="fullName" class="form-label">Họ và tên</label>
                                    <input type="text" class="form-control" id="fullName" th:field="*{fullName}" required>
                                </div>
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" th:field="*{email}" required>
                                </div>
                                <div class="mb-3">
                                    <label for="phoneNumber" class="form-label">Số điện thoại</label>
                                    <input type="text" class="form-control" id="phoneNumber" th:field="*{phoneNumber}">
                                </div>
                                <div class="mb-3">
                                    <label for="address" class="form-label">Địa chỉ</label>
                                    <input type="text" class="form-control" id="address" th:field="*{address}">
                                </div>
                            </div>
                    </div>

                    <!-- Thông tin gia đình -->
                    <div th:if="${user.role == 'FAMILY'}" class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Thông tin gia đình</h5>
                            <div class="mb-3">
                                <label for="childName" class="form-label">Tên trẻ</label>
                                <input type="text" class="form-control" id="childName" th:field="${familyProfile.childName}">
                            </div>
                            <div class="mb-3">
                                <label for="childAge" class="form-label">Tuổi trẻ (tháng)</label>
                                <input type="number" class="form-control" id="childAge" th:field="${familyProfile.childAge}">
                            </div>
                            <div class="mb-3">
                                <label for="specificNeeds" class="form-label">Nhu cầu cụ thể</label>
                                <textarea class="form-control" id="specificNeeds" th:field="${familyProfile.specificNeeds}" rows="4"></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="preferredLocation" class="form-label">Vị trí ưu tiên</label>
                                <input type="text" class="form-control" id="preferredLocation" th:field="${familyProfile.preferredLocation}">
                            </div>
                        </div>
                    </div>
                    <!-- Nút hành động -->
                    <div class="mb-3">
                        <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
                        <a th:href="@{/user-profile}" class="btn btn-secondary">Hủy</a>
                    </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<!-- Core JS -->
<script src="/static/assets/vendor/libs/jquery/jquery.js"></script>
<script src="/static/assets/vendor/libs/popper/popper.js"></script>
<script src="/static/assets/vendor/js/bootstrap.js"></script>
<script src="/static/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
<script src="/static/assets/vendor/js/menu.js"></script>
<script src="/static/assets/vendor/libs/apex-charts/apexcharts.js"></script>
<script src="/static/assets/js/main.js"></script>
<script src="/static/assets/js/dashboards-analytics.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
</body>
</html>